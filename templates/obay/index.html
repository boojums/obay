{% extends 'base.html' %}
{% load thumbnail %}

{% block body_block %}
    <div class="page-header">
        <h1>{{ current_auction.name }} </h1>
        <p>This is a test auction for a potential online auction fundraiser.
        <div class="alert alert-success" role="alert">
            There are {{ current_auction.end|timeuntil }} left in this auction! Bid now!
        </div>        
    </div> 

    <div class="row">
        
        {% if items %}
            {% for item in items %}
            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">       
                <div class="thumbnail">
                    {% thumbnail item.pic "200x150" crop="center" as im %}
                        <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
                    {% endthumbnail %}
                    <div class="caption">
                        <h3>{{ item.name }}</h3>
                        {% if item.top_bid %}
                            <p>Top bid: ${{ item.top_bid.amount }} ({{ item.top_bid.user.username }})</p>
                        {% else %}
                            <p>No bids yet!</p>
                        {% endif %}
                        <a href="{%url 'item' item.slug %}" class="btn btn-primary">More info</a>
                    </div>
                </div>
             </div>
            {% endfor %}
        {% else %}
            <strong>No items.</strong><br />
        {% endif %} 
    </div>
    <div class="row">
        <div class="pagination">
            <span class="step-links">
                {% if items.has_previous %}
                    <a href="?page={{ items.previous_page_number }}">previous</a>
                {% endif %}
                <span class="current">
                    Page {{ items.number }} of {{ items.paginator.num_pages}}   
                </span>
                {% if items.has_next %}
                    <a href="?page={{ items.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>

    </div>
{% endblock %}
